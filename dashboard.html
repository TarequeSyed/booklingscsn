<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard â€” Booklings CSN</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    
    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore-compat.js"></script>
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html, body {
            cursor: none;
            overflow-x: hidden;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            background: #000;
            color: white;
            min-height: 100vh;
            
            background-image: 
                radial-gradient(circle at 20% 80%, rgba(120, 69, 219, 0.25) 0%, transparent 50%),
                radial-gradient(circle at 80% 20%, rgba(236, 72, 153, 0.25) 0%, transparent 50%),
                radial-gradient(circle at 40% 40%, rgba(168, 85, 247, 0.15) 0%, transparent 60%),
                linear-gradient(135deg, #0d0a1f 0%, #1a0a2e 50%, #0f0a1f 100%);
            
            background-attachment: fixed;
        }

        body::before {
            content: '';
            position: fixed;
            inset: 0;
            background: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="100" height="100" viewBox="0 0 100 100"><filter id="noise"><feTurbulence type="fractalNoise" baseFrequency="0.9" numOctaves="4" stitchTiles="stitch"/><feColorMatrix type="matrix" values="1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 3 -1"/></filter><rect width="100" height="100" filter="url(%23noise)" opacity="0.15"/></svg>');
            pointer-events: none;
            z-index: 0;
        }

        /* Custom Cursor */
        .cursor-dot {
            width: 8px;
            height: 8px;
            background: #fff;
            border-radius: 50%;
            position: fixed;
            pointer-events: none;
            z-index: 99999;
            transform: translate(-50%, -50%);
            transition: transform 0.1s ease, background 0.2s ease;
        }

        .cursor-circle {
            width: 40px;
            height: 40px;
            border: 2px solid rgba(167, 139, 250, 0.8);
            border-radius: 50%;
            position: fixed;
            pointer-events: none;
            z-index: 99998;
            transform: translate(-50%, -50%);
            transition: width 0.3s ease, height 0.3s ease, border-color 0.3s ease, background 0.3s ease;
        }

        .cursor-dot.hover {
            transform: translate(-50%, -50%) scale(0.5);
            background: #a78bfa;
        }

        .cursor-circle.hover {
            width: 60px;
            height: 60px;
            border-color: #f093fb;
            background: rgba(167, 139, 250, 0.1);
        }

        /* Glass Morphism */
        .glass {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .glass-strong {
            background: rgba(255, 255, 255, 0.08);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.15);
        }

        /* Holographic Text */
        .holo-text {
            background: linear-gradient(90deg, #667eea, #764ba2, #f093fb, #667eea);
            background-size: 300% 100%;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            animation: holo-shift 3s ease infinite;
        }

        @keyframes holo-shift {
            0%, 100% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
        }

        /* Coin Animation */
        @keyframes coin-float {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }

        .coin-icon {
            animation: coin-float 3s ease-in-out infinite;
        }

        /* Coin Counter Animation */
        @keyframes pulse-glow {
            0%, 100% { box-shadow: 0 0 30px rgba(255, 215, 0, 0.3); }
            50% { box-shadow: 0 0 60px rgba(255, 215, 0, 0.6); }
        }

        .coin-display {
            animation: pulse-glow 3s ease-in-out infinite;
        }

        /* Tab System */
        .tab-btn {
            transition: all 0.3s ease;
            position: relative;
        }

        .tab-btn.active {
            color: white;
        }

        .tab-btn.active::after {
            content: '';
            position: absolute;
            bottom: -2px;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(90deg, #667eea, #f093fb);
            border-radius: 3px;
        }

        .tab-btn:not(.active) {
            color: #888;
        }

        .tab-content {
            display: none;
            animation: fadeInContent 0.4s ease;
        }

        .tab-content.active {
            display: block;
        }

        @keyframes fadeInContent {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Redeem Cards */
        .redeem-card {
            transition: all 0.4s cubic-bezier(0.23, 1, 0.32, 1);
        }

        .redeem-card:hover:not(.disabled) {
            transform: translateY(-8px) scale(1.02);
            box-shadow: 0 25px 50px rgba(0, 0, 0, 0.4);
        }

        .redeem-card.disabled {
            opacity: 0.5;
            pointer-events: none;
        }

        /* Leaderboard */
        .leaderboard-item {
            transition: all 0.3s ease;
        }

        .leaderboard-item:hover {
            background: rgba(255, 255, 255, 0.08);
            transform: translateX(8px);
        }

        .rank-1 { border-left-color: #ffd700 !important; }
        .rank-2 { border-left-color: #c0c0c0 !important; }
        .rank-3 { border-left-color: #cd7f32 !important; }

        .crown {
            animation: crown-bounce 2s ease-in-out infinite;
        }

        @keyframes crown-bounce {
            0%, 100% { transform: translateY(0) rotate(-5deg); }
            50% { transform: translateY(-5px) rotate(5deg); }
        }

        /* Loading State */
        .loading-overlay {
            position: fixed;
            inset: 0;
            background: #000;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            z-index: 100000;
        }

        .loading-overlay.fade-out {
            animation: fadeOut 0.5s ease forwards;
        }

        @keyframes fadeOut {
            to {
                opacity: 0;
                visibility: hidden;
                pointer-events: none;
            }
        }

        .loader {
            width: 50px;
            height: 50px;
            border: 4px solid rgba(167, 139, 250, 0.2);
            border-top-color: #a78bfa;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        .loader-sm {
            width: 20px;
            height: 20px;
            border-width: 2px;
        }

        .loader-text {
            margin-top: 20px;
            color: #888;
            font-size: 14px;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* Success/Error Toast */
        .toast {
            position: fixed;
            bottom: 30px;
            right: 30px;
            padding: 16px 24px;
            border-radius: 16px;
            z-index: 100000;
            transform: translateX(150%);
            transition: transform 0.4s cubic-bezier(0.23, 1, 0.32, 1);
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .toast.show {
            transform: translateX(0);
        }

        .toast.success {
            background: rgba(34, 197, 94, 0.9);
            border: 1px solid rgba(34, 197, 94, 1);
        }

        .toast.error {
            background: rgba(239, 68, 68, 0.9);
            border: 1px solid rgba(239, 68, 68, 1);
        }

        /* Sidebar */
        .sidebar-link {
            transition: all 0.3s ease;
        }

        .sidebar-link:hover,
        .sidebar-link.active {
            background: rgba(167, 139, 250, 0.2);
            border-left-color: #a78bfa;
        }

        /* Modal */
        .modal-backdrop {
            position: fixed;
            inset: 0;
            background: rgba(0, 0, 0, 0.9);
            backdrop-filter: blur(10px);
            z-index: 99990;
            display: none;
            align-items: center;
            justify-content: center;
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .modal-backdrop.show {
            display: flex;
            opacity: 1;
        }

        .modal-content {
            transform: scale(0.9);
            transition: transform 0.3s ease;
            max-height: 90vh;
            overflow-y: auto;
        }

        .modal-backdrop.show .modal-content {
            transform: scale(1);
        }

        /* Main Content */
        .main-content {
            opacity: 0;
        }

        .main-content.show {
            animation: fadeIn 0.5s ease forwards;
        }

        @keyframes fadeIn {
            to { opacity: 1; }
        }

        /* Transaction Item */
        .transaction-item {
            transition: all 0.3s ease;
        }

        .transaction-item:hover {
            background: rgba(255, 255, 255, 0.05);
            transform: translateX(5px);
        }

        /* Profile Input */
        .profile-input {
            transition: all 0.3s ease;
        }

        .profile-input:focus {
            box-shadow: 0 0 20px rgba(167, 139, 250, 0.3);
        }

        /* Stats Card */
        .stat-card {
            transition: all 0.3s ease;
        }

        .stat-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.3);
        }

        /* SVG Icons */
        .icon {
            width: 24px;
            height: 24px;
            flex-shrink: 0;
        }

        .icon-sm {
            width: 18px;
            height: 18px;
        }

        .icon-lg {
            width: 32px;
            height: 32px;
        }

        .icon-xl {
            width: 48px;
            height: 48px;
        }

        /* Mobile */
        @media (max-width: 768px) {
            * { cursor: auto !important; }
            .cursor-dot, .cursor-circle { display: none !important; }
            
            body {
                cursor: auto !important;
            }
        }

        /* Scrollbar */
        ::-webkit-scrollbar {
            width: 10px;
        }

        ::-webkit-scrollbar-track {
            background: #0a0a0a;
        }

        ::-webkit-scrollbar-thumb {
            background: linear-gradient(180deg, #8b5cf6, #ec4899);
            border-radius: 10px;
        }

        /* Empty State */
        .empty-state {
            text-align: center;
            padding: 40px 20px;
            color: #666;
        }

        /* Badge */
        .badge {
            display: inline-flex;
            align-items: center;
            gap: 4px;
            padding: 4px 10px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
        }

        .badge-success {
            background: rgba(34, 197, 94, 0.2);
            color: #22c55e;
        }

        .badge-pending {
            background: rgba(251, 191, 36, 0.2);
            color: #fbbf24;
        }

        .badge-failed {
            background: rgba(239, 68, 68, 0.2);
            color: #ef4444;
        }

        /* FIX: Main layout container */
        .main-layout {
            display: flex;
            min-height: 100vh;
            position: relative;
            z-index: 10;
        }

        /* FIX: Sidebar proper sizing */
        .sidebar {
            width: 288px;
            flex-shrink: 0;
        }

        /* FIX: Main content scrolling */
        .main-area {
            flex: 1;
            overflow-y: auto;
            overflow-x: hidden;
            height: 100vh;
        }

        @media (max-width: 1024px) {
            .sidebar {
                display: none;
            }
            
            .main-area {
                width: 100%;
            }
        }
    </style>
</head>
<body>

<!-- SVG Sprite (Hidden) -->
<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
    <symbol id="icon-coin" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <circle cx="12" cy="12" r="10"/>
        <path d="M12 6v12M9 9h6M9 15h6"/>
    </symbol>
    
    <symbol id="icon-gift" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <rect x="3" y="8" width="18" height="14" rx="2"/>
        <path d="M12 8V22M3 12h18M7.5 8a2.5 2.5 0 0 1 0-5C9 3 12 6 12 8M16.5 8a2.5 2.5 0 0 0 0-5C15 3 12 6 12 8"/>
    </symbol>
    
    <symbol id="icon-trophy" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <path d="M6 9H4.5a2.5 2.5 0 0 1 0-5H6M18 9h1.5a2.5 2.5 0 0 0 0-5H18"/>
        <path d="M4 22h16M10 22v-4a2 2 0 0 1 4 0v4"/>
        <rect x="6" y="2" width="12" height="12" rx="2"/>
    </symbol>
    
    <symbol id="icon-user" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <circle cx="12" cy="8" r="4"/>
        <path d="M4 20c0-4 4-6 8-6s8 2 8 6"/>
    </symbol>
    
    <symbol id="icon-settings" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <circle cx="12" cy="12" r="3"/>
        <path d="M12 1v4M12 19v4M4.22 4.22l2.83 2.83M16.95 16.95l2.83 2.83M1 12h4M19 12h4M4.22 19.78l2.83-2.83M16.95 7.05l2.83-2.83"/>
    </symbol>
    
    <symbol id="icon-logout" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4M16 17l5-5-5-5M21 12H9"/>
    </symbol>
    
    <symbol id="icon-home" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/>
        <polyline points="9,22 9,12 15,12 15,22"/>
    </symbol>
    
    <symbol id="icon-book" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20"/>
        <path d="M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"/>
    </symbol>
    
    <symbol id="icon-star" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <polygon points="12,2 15.09,8.26 22,9.27 17,14.14 18.18,21.02 12,17.77 5.82,21.02 7,14.14 2,9.27 8.91,8.26"/>
    </symbol>
    
    <symbol id="icon-clock" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <circle cx="12" cy="12" r="10"/>
        <polyline points="12,6 12,12 16,14"/>
    </symbol>
    
    <symbol id="icon-check" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <polyline points="20,6 9,17 4,12"/>
    </symbol>
    
    <symbol id="icon-x" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <line x1="18" y1="6" x2="6" y2="18"/>
        <line x1="6" y1="6" x2="18" y2="18"/>
    </symbol>
    
    <symbol id="icon-arrow-up" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <line x1="12" y1="19" x2="12" y2="5"/>
        <polyline points="5,12 12,5 19,12"/>
    </symbol>
    
    <symbol id="icon-arrow-down" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <line x1="12" y1="5" x2="12" y2="19"/>
        <polyline points="19,12 12,19 5,12"/>
    </symbol>
    
    <symbol id="icon-calendar" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <rect x="3" y="4" width="18" height="18" rx="2" ry="2"/>
        <line x1="16" y1="2" x2="16" y2="6"/>
        <line x1="8" y1="2" x2="8" y2="6"/>
        <line x1="3" y1="10" x2="21" y2="10"/>
    </symbol>
    
    <symbol id="icon-message" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"/>
    </symbol>
    
    <symbol id="icon-fire" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <path d="M12 2c0 4-4 6-4 10a4 4 0 0 0 8 0c0-4-4-6-4-10z"/>
        <path d="M12 18a2 2 0 0 0 2-2c0-2-2-3-2-5-0 2-2 3-2 5a2 2 0 0 0 2 2z"/>
    </symbol>
    
    <symbol id="icon-users" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"/>
        <circle cx="9" cy="7" r="4"/>
        <path d="M23 21v-2a4 4 0 0 0-3-3.87"/>
        <path d="M16 3.13a4 4 0 0 1 0 7.75"/>
    </symbol>
    
    <symbol id="icon-edit" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"/>
        <path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"/>
    </symbol>
    
    <symbol id="icon-bookmark" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <path d="M19 21l-7-5-7 5V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2z"/>
    </symbol>
    
    <symbol id="icon-shirt" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <path d="M20.38 3.46L16 2a4 4 0 0 1-8 0L3.62 3.46a2 2 0 0 0-1.34 2.23l.58 3.47a1 1 0 0 0 .99.84H6v10c0 1.1.9 2 2 2h8a2 2 0 0 0 2-2V10h2.15a1 1 0 0 0 .99-.84l.58-3.47a2 2 0 0 0-1.34-2.23z"/>
    </symbol>
    
    <symbol id="icon-crown" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <path d="M2 4l3 12h14l3-12-6 7-4-7-4 7-6-7z"/>
        <path d="M5 20h14"/>
    </symbol>
    
    <symbol id="icon-card" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <rect x="1" y="4" width="22" height="16" rx="2" ry="2"/>
        <line x1="1" y1="10" x2="23" y2="10"/>
    </symbol>
    
    <symbol id="icon-info" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <circle cx="12" cy="12" r="10"/>
        <line x1="12" y1="16" x2="12" y2="12"/>
        <line x1="12" y1="8" x2="12.01" y2="8"/>
    </symbol>
    
    <symbol id="icon-history" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <path d="M3 3v5h5"/>
        <path d="M3.05 13A9 9 0 1 0 6 5.3L3 8"/>
        <path d="M12 7v5l4 2"/>
    </symbol>
</svg>

<!-- Loading Overlay -->
<div class="loading-overlay" id="loadingOverlay">
    <div class="loader"></div>
    <p class="loader-text">Loading your dashboard...</p>
</div>

<!-- Toast Notification -->
<div class="toast" id="toast">
    <svg class="icon-sm"><use href="#icon-check"/></svg>
    <span id="toastMessage"></span>
</div>

<!-- Redeem Confirmation Modal -->
<div class="modal-backdrop" id="redeemModal">
    <div class="modal-content glass-strong rounded-3xl p-8 max-w-md mx-4 w-full">
        <div class="text-center">
            <div class="w-20 h-20 mx-auto mb-4 rounded-full bg-gradient-to-br from-purple-600 to-pink-600 flex items-center justify-center">
                <svg class="icon-xl text-white"><use href="#icon-gift"/></svg>
            </div>
            <h3 class="text-2xl font-black mb-2" id="modalTitle">Confirm Redemption</h3>
            <p class="text-gray-400 mb-6" id="modalDescription">Are you sure you want to redeem this reward?</p>
            
            <div class="glass rounded-2xl p-4 mb-6">
                <p class="text-gray-400 text-sm">Cost</p>
                <p class="text-3xl font-black text-yellow-400" id="modalCost">500 coins</p>
            </div>

            <div class="flex gap-4">
                <button id="cancelRedeem" class="flex-1 py-3 rounded-xl glass font-bold hover:bg-white/10 transition-all flex items-center justify-center gap-2">
                    <svg class="icon-sm"><use href="#icon-x"/></svg>
                    Cancel
                </button>
                <button id="confirmRedeem" class="flex-1 py-3 rounded-xl bg-gradient-to-r from-purple-600 to-pink-600 font-bold hover:scale-105 transition-all flex items-center justify-center gap-2">
                    <svg class="icon-sm"><use href="#icon-check"/></svg>
                    Confirm
                </button>
            </div>
        </div>
    </div>
</div>

<!-- Edit Profile Modal -->
<div class="modal-backdrop" id="editProfileModal">
    <div class="modal-content glass-strong rounded-3xl p-8 max-w-md mx-4 w-full">
        <div class="flex items-center justify-between mb-6">
            <h3 class="text-2xl font-black">Edit Profile</h3>
            <button id="closeEditProfile" class="w-10 h-10 rounded-full glass flex items-center justify-center hover:bg-white/10 transition-all">
                <svg class="icon-sm"><use href="#icon-x"/></svg>
            </button>
        </div>
        
        <form id="editProfileForm" class="space-y-4">
            <div>
                <label class="block text-gray-400 text-sm mb-2">Display Name</label>
                <input 
                    type="text" 
                    id="editName" 
                    class="profile-input w-full glass rounded-xl px-4 py-3 text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-purple-500"
                    placeholder="Your name"
                />
            </div>
            
            <div>
                <label class="block text-gray-400 text-sm mb-2">Bio</label>
                <textarea 
                    id="editBio" 
                    rows="3"
                    class="profile-input w-full glass rounded-xl px-4 py-3 text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-purple-500 resize-none"
placeholder="Tell us about yourself..."
></textarea>
</div>
        <div>
            <label class="block text-gray-400 text-sm mb-2">Favorite Genre</label>
            <select 
                id="editGenre"
                class="profile-input w-full glass rounded-xl px-4 py-3 text-white focus:outline-none focus:ring-2 focus:ring-purple-500 bg-transparent"
            >
                <option value="" class="bg-gray-900">Select genre</option>
                <option value="Fiction" class="bg-gray-900">Fiction</option>
                <option value="Non-Fiction" class="bg-gray-900">Non-Fiction</option>
                <option value="Philosophy" class="bg-gray-900">Philosophy</option>
                <option value="Science" class="bg-gray-900">Science</option>
                <option value="History" class="bg-gray-900">History</option>
                <option value="Poetry" class="bg-gray-900">Poetry</option>
                <option value="Mystery" class="bg-gray-900">Mystery</option>
                <option value="Fantasy" class="bg-gray-900">Fantasy</option>
            </select>
        </div>
        
        <button 
            type="submit" 
            class="w-full py-3 rounded-xl bg-gradient-to-r from-purple-600 to-pink-600 font-bold hover:scale-[1.02] transition-all flex items-center justify-center gap-2"
        >
            <svg class="icon-sm"><use href="#icon-check"/></svg>
            Save Changes
        </button>
    </form>
</div>
</div>
<!-- Custom Cursor -->
<div class="cursor-dot" id="cursorDot"></div>
<div class="cursor-circle" id="cursorCircle"></div>
<!-- Main Layout - FIXED STRUCTURE -->
<div class="main-content main-layout" id="mainContent">
<!-- Sidebar - FIXED -->
<aside class="sidebar hidden lg:flex flex-col glass-strong border-r border-white/10 p-6">
    
    <!-- Logo -->
    <div class="mb-10">
        <a href="index.html" class="text-3xl font-black holo-text">Booklings</a>
        <p class="text-gray-500 text-sm mt-1">Member Dashboard</p>
    </div>

    <!-- Navigation -->
    <nav class="flex-1 space-y-2">
        <button data-tab="coins" class="sidebar-link active w-full flex items-center gap-4 px-4 py-3 rounded-xl border-l-4 border-transparent text-left">
            <svg class="icon text-yellow-400"><use href="#icon-coin"/></svg>
            <span class="font-medium">My Coins</span>
        </button>
        <button data-tab="redeem" class="sidebar-link w-full flex items-center gap-4 px-4 py-3 rounded-xl border-l-4 border-transparent text-left text-gray-400">
            <svg class="icon text-pink-400"><use href="#icon-gift"/></svg>
            <span class="font-medium">Redeem</span>
        </button>
        <button data-tab="leaderboard" class="sidebar-link w-full flex items-center gap-4 px-4 py-3 rounded-xl border-l-4 border-transparent text-left text-gray-400">
            <svg class="icon text-purple-400"><use href="#icon-trophy"/></svg>
            <span class="font-medium">Leaderboard</span>
        </button>
        <button data-tab="profile" class="sidebar-link w-full flex items-center gap-4 px-4 py-3 rounded-xl border-l-4 border-transparent text-left text-gray-400">
            <svg class="icon text-blue-400"><use href="#icon-user"/></svg>
            <span class="font-medium">Profile</span>
        </button>
    </nav>

    <!-- User Info -->
    <div class="glass rounded-2xl p-4 mb-4">
        <div class="flex items-center gap-3">
            <div class="w-12 h-12 rounded-full bg-gradient-to-br from-purple-600 to-pink-600 flex items-center justify-center text-lg font-black" id="sidebarAvatar">
                --
            </div>
            <div class="flex-1 min-w-0">
                <p class="font-bold truncate" id="sidebarName">Loading...</p>
                <p class="text-yellow-400 text-sm font-bold flex items-center gap-1">
                    <svg class="icon-sm"><use href="#icon-coin"/></svg>
                    <span id="sidebarCoins">0</span>
                </p>
            </div>
        </div>
    </div>

    <!-- Logout Button -->
    <button 
        id="logoutBtn"
        class="flex items-center gap-4 px-4 py-3 rounded-xl text-red-400 hover:bg-red-500/20 transition-all"
    >
        <svg class="icon"><use href="#icon-logout"/></svg>
        <span class="font-medium">Logout</span>
    </button>
</aside>

<!-- Main Content Area - FIXED -->
<main class="main-area p-6 lg:p-10">
    
    <!-- Mobile Header -->
    <div class="lg:hidden flex items-center justify-between mb-6">
        <a href="index.html" class="text-2xl font-black holo-text">Booklings</a>
        <div class="flex items-center gap-4">
            <span class="text-yellow-400 font-bold flex items-center gap-1">
                <svg class="icon-sm"><use href="#icon-coin"/></svg>
                <span id="mobileCoins">0</span>
            </span>
            <button id="mobileLogoutBtn" class="w-10 h-10 rounded-full bg-red-500/20 flex items-center justify-center text-red-400">
                <svg class="icon-sm"><use href="#icon-logout"/></svg>
            </button>
        </div>
    </div>

    <!-- Mobile Tab Navigation -->
    <div class="lg:hidden flex gap-2 mb-8 overflow-x-auto pb-2">
        <button data-tab="coins" class="tab-btn active px-5 py-3 rounded-full glass font-bold text-sm whitespace-nowrap flex items-center gap-2">
            <svg class="icon-sm"><use href="#icon-coin"/></svg>
            Coins
        </button>
        <button data-tab="redeem" class="tab-btn px-5 py-3 rounded-full glass font-bold text-sm whitespace-nowrap flex items-center gap-2">
            <svg class="icon-sm"><use href="#icon-gift"/></svg>
            Redeem
        </button>
        <button data-tab="leaderboard" class="tab-btn px-5 py-3 rounded-full glass font-bold text-sm whitespace-nowrap flex items-center gap-2">
            <svg class="icon-sm"><use href="#icon-trophy"/></svg>
            Leaderboard
        </button>
        <button data-tab="profile" class="tab-btn px-5 py-3 rounded-full glass font-bold text-sm whitespace-nowrap flex items-center gap-2">
            <svg class="icon-sm"><use href="#icon-user"/></svg>
            Profile
        </button>
    </div>

    <!-- ==================== COINS SECTION ==================== -->
    <div id="coinsSection" class="tab-content active">
        
        <!-- Coin Balance Card -->
        <div class="coin-display glass-strong rounded-3xl p-8 lg:p-12 mb-8 relative overflow-hidden">
            <div class="absolute -top-20 -right-20 w-60 h-60 bg-yellow-500/20 blur-3xl rounded-full"></div>
            <div class="absolute -bottom-20 -left-20 w-60 h-60 bg-orange-500/20 blur-3xl rounded-full"></div>

            <div class="relative z-10 text-center">
                <div class="coin-icon w-24 h-24 mx-auto mb-6 rounded-full bg-gradient-to-br from-yellow-400 to-orange-500 flex items-center justify-center">
                    <svg class="icon-xl text-black"><use href="#icon-coin"/></svg>
                </div>
                <p class="text-gray-400 text-lg mb-2">Your Balance</p>
                <h1 class="text-6xl lg:text-8xl font-black text-yellow-400 mb-4" id="coinBalance">0</h1>
                <p class="text-gray-500">Booklings Coins</p>
            </div>
        </div>

        <!-- Stats Row -->
        <div class="grid grid-cols-2 lg:grid-cols-4 gap-4 mb-8">
            <div class="stat-card glass rounded-2xl p-5 text-center">
                <svg class="icon-lg text-green-400 mx-auto mb-2"><use href="#icon-arrow-up"/></svg>
                <p class="text-2xl font-black text-green-400" id="totalEarned">0</p>
                <p class="text-gray-500 text-sm">Total Earned</p>
            </div>
            <div class="stat-card glass rounded-2xl p-5 text-center">
                <svg class="icon-lg text-red-400 mx-auto mb-2"><use href="#icon-arrow-down"/></svg>
                <p class="text-2xl font-black text-red-400" id="totalSpent">0</p>
                <p class="text-gray-500 text-sm">Total Spent</p>
            </div>
            <div class="stat-card glass rounded-2xl p-5 text-center">
                <svg class="icon-lg text-purple-400 mx-auto mb-2"><use href="#icon-gift"/></svg>
                <p class="text-2xl font-black text-purple-400" id="totalRedemptions">0</p>
                <p class="text-gray-500 text-sm">Redemptions</p>
            </div>
            <div class="stat-card glass rounded-2xl p-5 text-center">
                <svg class="icon-lg text-orange-400 mx-auto mb-2"><use href="#icon-fire"/></svg>
                <p class="text-2xl font-black text-orange-400" id="currentStreak">0</p>
                <p class="text-gray-500 text-sm">Day Streak</p>
            </div>
        </div>

        <!-- How to Earn Coins -->
        <div class="glass-strong rounded-3xl p-8 mb-8">
            <h2 class="text-2xl font-black mb-6 flex items-center gap-3">
                <svg class="icon text-purple-400"><use href="#icon-info"/></svg>
                How to Earn Coins
            </h2>

            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                <div class="glass rounded-2xl p-5 border-l-4 border-yellow-500">
                    <div class="flex items-center gap-3 mb-3">
                        <svg class="icon text-yellow-400"><use href="#icon-book"/></svg>
                        <h3 class="font-bold">Finish a Book</h3>
                    </div>
                    <p class="text-gray-400 text-sm mb-2">Complete reading any book from our list</p>
                    <p class="text-yellow-400 font-black">+50 coins</p>
                </div>

                <div class="glass rounded-2xl p-5 border-l-4 border-purple-500">
                    <div class="flex items-center gap-3 mb-3">
                        <svg class="icon text-purple-400"><use href="#icon-edit"/></svg>
                        <h3 class="font-bold">Write a Review</h3>
                    </div>
                    <p class="text-gray-400 text-sm mb-2">Share your thoughts on a book</p>
                    <p class="text-yellow-400 font-black">+30 coins</p>
                </div>

                <div class="glass rounded-2xl p-5 border-l-4 border-pink-500">
                    <div class="flex items-center gap-3 mb-3">
                        <svg class="icon text-pink-400"><use href="#icon-calendar"/></svg>
                        <h3 class="font-bold">Attend a Session</h3>
                    </div>
                    <p class="text-gray-400 text-sm mb-2">Join our weekly reading sessions</p>
                    <p class="text-yellow-400 font-black">+25 coins</p>
                </div>

                <div class="glass rounded-2xl p-5 border-l-4 border-blue-500">
                    <div class="flex items-center gap-3 mb-3">
                        <svg class="icon text-blue-400"><use href="#icon-message"/></svg>
                        <h3 class="font-bold">Join Discussion</h3>
                    </div>
                    <p class="text-gray-400 text-sm mb-2">Participate in book debates</p>
                    <p class="text-yellow-400 font-black">+15 coins</p>
                </div>

                <div class="glass rounded-2xl p-5 border-l-4 border-green-500">
                    <div class="flex items-center gap-3 mb-3">
                        <svg class="icon text-green-400"><use href="#icon-fire"/></svg>
                        <h3 class="font-bold">Daily Streak</h3>
                    </div>
                    <p class="text-gray-400 text-sm mb-2">Log in daily to maintain streak</p>
                    <p class="text-yellow-400 font-black">+5 coins/day</p>
                </div>

                <div class="glass rounded-2xl p-5 border-l-4 border-orange-500">
                    <div class="flex items-center gap-3 mb-3">
                        <svg class="icon text-orange-400"><use href="#icon-users"/></svg>
                        <h3 class="font-bold">Refer a Friend</h3>
                    </div>
                    <p class="text-gray-400 text-sm mb-2">Invite friends to join Booklings</p>
                    <p class="text-yellow-400 font-black">+100 coins</p>
                </div>
            </div>
        </div>

        <!-- Recent Transactions -->
        <div class="glass-strong rounded-3xl p-8">
            <h2 class="text-2xl font-black mb-6 flex items-center gap-3">
                <svg class="icon text-blue-400"><use href="#icon-history"/></svg>
                Recent Transactions
            </h2>
            <div class="space-y-3" id="transactionsList">
                <div class="empty-state">
                    <svg class="icon-xl text-gray-600 mx-auto mb-3"><use href="#icon-clock"/></svg>
                    <p>No transactions yet</p>
                </div>
            </div>
        </div>
    </div>

    <!-- ==================== REDEEM SECTION ==================== -->
    <div id="redeemSection" class="tab-content">
        <div class="mb-8">
            <h1 class="text-4xl lg:text-5xl font-black mb-2">
                <span class="holo-text">Redeem Rewards</span>
            </h1>
            <p class="text-gray-400 text-lg">Exchange your coins for exclusive rewards!</p>
            <p class="text-yellow-400 font-bold mt-2 flex items-center gap-2">
                <svg class="icon-sm"><use href="#icon-coin"/></svg>
                Your balance: <span id="redeemBalance">0</span> coins
            </p>
        </div>

        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6" id="rewardsGrid"></div>

        <!-- Redemption History -->
        <div class="glass-strong rounded-3xl p-8 mt-8">
            <h2 class="text-2xl font-black mb-6 flex items-center gap-3">
                <svg class="icon text-pink-400"><use href="#icon-history"/></svg>
                Redemption History
            </h2>
            <div id="redemptionHistory" class="space-y-3">
                <div class="empty-state">
                    <svg class="icon-xl text-gray-600 mx-auto mb-3"><use href="#icon-gift"/></svg>
                    <p>No redemptions yet</p>
                </div>
            </div>
        </div>
    </div>

    <!-- ==================== LEADERBOARD SECTION ==================== -->
    <div id="leaderboardSection" class="tab-content">
        <div class="mb-8">
            <h1 class="text-4xl lg:text-5xl font-black mb-2">
                <span class="holo-text">Leaderboard</span>
            </h1>
            <p class="text-gray-400 text-lg">Top readers of Booklings CSN</p>
        </div>

        <!-- Top 3 Podium -->
        <div class="glass-strong rounded-3xl p-8 mb-8">
            <div class="flex items-end justify-center gap-4 lg:gap-8">
                <!-- 2nd Place -->
                <div class="text-center flex-shrink-0">
                    <div class="w-20 h-20 lg:w-24 lg:h-24 rounded-full bg-gradient-to-br from-gray-400 to-gray-600 flex items-center justify-center text-2xl lg:text-3xl font-black mx-auto mb-3 border-4 border-gray-400" id="rank2Avatar">--</div>
                    <p class="font-bold text-sm lg:text-base truncate max-w-[100px]" id="rank2Name">---</p>
                    <p class="text-yellow-400 font-bold text-sm flex items-center justify-center gap-1">
                        <svg class="icon-sm"><use href="#icon-coin"/></svg>
                        <span id="rank2Coins">0</span>
                    </p>
                    <div class="mt-3 bg-gray-500/30 rounded-t-lg w-20 lg:w-24 h-24 lg:h-32 flex items-center justify-center mx-auto">
                        <span class="text-4xl lg:text-5xl font-black text-gray-400">2</span>
                    </div>
                </div>

                <!-- 1st Place -->
                <div class="text-center -mt-8 flex-shrink-0">
                    <div class="crown mb-2">
                        <svg class="icon-lg text-yellow-400 mx-auto"><use href="#icon-crown"/></svg>
                    </div>
                    <div class="w-24 h-24 lg:w-32 lg:h-32 rounded-full bg-gradient-to-br from-yellow-400 to-orange-500 flex items-center justify-center text-3xl lg:text-4xl font-black mx-auto mb-3 border-4 border-yellow-400 shadow-lg shadow-yellow-500/30" id="rank1Avatar">--</div>
                    <p class="font-bold text-base lg:text-lg truncate max-w-[120px]" id="rank1Name">---</p>
                    <p class="text-yellow-400 font-bold flex items-center justify-center gap-1">
                        <svg class="icon-sm"><use href="#icon-coin"/></svg>
                        <span id="rank1Coins">0</span>
                    </p>
                    <div class="mt-3 bg-yellow-500/30 rounded-t-lg w-24 lg:w-32 h-32 lg:h-40 flex items-center justify-center mx-auto">
                        <span class="text-5xl lg:text-6xl font-black text-yellow-400">1</span>
                    </div>
                </div>

                <!-- 3rd Place -->
                <div class="text-center flex-shrink-0">
                    <div class="w-20 h-20 lg:w-24 lg:h-24 rounded-full bg-gradient-to-br from-orange-600 to-orange-800 flex items-center justify-center text-2xl lg:text-3xl font-black mx-auto mb-3 border-4 border-orange-600" id="rank3Avatar">--</div>
                    <p class="font-bold text-sm lg:text-base truncate max-w-[100px]" id="rank3Name">---</p>
                    <p class="text-yellow-400 font-bold text-sm flex items-center justify-center gap-1">
                        <svg class="icon-sm"><use href="#icon-coin"/></svg>
                        <span id="rank3Coins">0</span>
                    </p>
                    <div class="mt-3 bg-orange-600/30 rounded-t-lg w-20 lg:w-24 h-20 lg:h-24 flex items-center justify-center mx-auto">
                        <span class="text-4xl lg:text-5xl font-black text-orange-400">3</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Full Leaderboard -->
        <div class="glass-strong rounded-3xl p-8">
            <h2 class="text-2xl font-black mb-6 flex items-center gap-3">
                <svg class="icon text-purple-400"><use href="#icon-trophy"/></svg>
                Full Rankings
            </h2>
            <div class="space-y-2" id="fullLeaderboard">
                <div class="empty-state">
                    <div class="loader loader-sm mx-auto mb-3"></div>
                    <p>Loading leaderboard...</p>
                </div>
            </div>
        </div>

        <!-- Your Rank Card -->
        <div class="glass-strong rounded-3xl p-8 mt-8 border-2 border-purple-500/50">
            <div class="flex items-center justify-between">
                <div class="flex items-center gap-4">
                    <div class="w-16 h-16 rounded-full bg-gradient-to-br from-purple-600 to-pink-600 flex items-center justify-center text-2xl font-black" id="yourRankAvatar">--</div>
                    <div>
                        <p class="text-gray-400 text-sm">Your Ranking</p>
                        <p class="text-2xl font-black">#<span id="yourRank">--</span></p>
                    </div>
                </div>
                <div class="text-right">
                    <p class="text-gray-400 text-sm">Your Coins</p>
                    <p class="text-2xl font-black text-yellow-400 flex items-center justify-end gap-1">
                        <svg class="icon-sm"><use href="#icon-coin"/></svg>
                        <span id="yourCoins">0</span>
                    </p>
                </div>
            </div>
        </div>
    </div>

    <!-- ==================== PROFILE SECTION ==================== -->
    <div id="profileSection" class="tab-content">
        <div class="mb-8">
            <h1 class="text-4xl lg:text-5xl font-black mb-2">
                <span class="holo-text">My Profile</span>
            </h1>
            <p class="text-gray-400 text-lg">Manage your account and preferences</p>
        </div>

        <!-- Profile Card -->
        <div class="glass-strong rounded-3xl p-8 mb-8 relative overflow-hidden">
            <div class="absolute -top-20 -right-20 w-60 h-60 bg-purple-500/20 blur-3xl rounded-full"></div>
            <div class="absolute -bottom-20 -left-20 w-60 h-60 bg-pink-500/20 blur-3xl rounded-full"></div>

            <div class="relative z-10">
                <div class="flex flex-col lg:flex-row items-center gap-8">
                    <div class="relative flex-shrink-0">
                        <div class="w-32 h-32 rounded-full bg-gradient-to-br from-purple-600 to-pink-600 flex items-center justify-center text-5xl font-black" id="profileAvatar">--</div>
                        <div class="absolute -bottom-2 -right-2 w-10 h-10 rounded-full bg-green-500 border-4 border-black flex items-center justify-center">
                            <svg class="icon-sm text-white"><use href="#icon-check"/></svg>
                        </div>
                    </div>

                    <div class="flex-1 text-center lg:text-left">
                        <h2 class="text-3xl font-black mb-1" id="profileName">Loading...</h2>
                        <p class="text-gray-400 mb-2" id="profileEmail">loading@email.com</p>
                        <p class="text-gray-500 text-sm mb-4" id="profileBio">No bio yet</p>
                        
                        <div class="flex flex-wrap justify-center lg:justify-start gap-3">
                            <span class="badge badge-success">
                                <svg class="icon-sm"><use href="#icon-check"/></svg>
                                Active Member
                            </span>
                            <span class="badge" style="background: rgba(167, 139, 250, 0.2); color: #a78bfa;">
                                <svg class="icon-sm"><use href="#icon-book"/></svg>
                                <span id="profileGenre">No genre</span>
                            </span>
                        </div>
                    </div>

                    <button id="editProfileBtn" class="px-6 py-3 rounded-xl glass font-bold hover:bg-white/10 transition-all flex items-center gap-2 flex-shrink-0">
                        <svg class="icon-sm"><use href="#icon-edit"/></svg>
                        Edit Profile
                    </button>
                </div>
            </div>
        </div>

        <!-- Stats Grid -->
        <div class="grid grid-cols-2 lg:grid-cols-4 gap-4 mb-8">
            <div class="stat-card glass-strong rounded-2xl p-6 text-center">
                <svg class="icon-lg text-yellow-400 mx-auto mb-3"><use href="#icon-coin"/></svg>
                <p class="text-3xl font-black text-yellow-400" id="profileCoins">0</p>
                <p class="text-gray-500 text-sm">Total Coins</p>
            </div>
            <div class="stat-card glass-strong rounded-2xl p-6 text-center">
                <svg class="icon-lg text-purple-400 mx-auto mb-3"><use href="#icon-trophy"/></svg>
                <p class="text-3xl font-black text-purple-400" id="profileRank">#--</p>
                <p class="text-gray-500 text-sm">Rank</p>
            </div>
            <div class="stat-card glass-strong rounded-2xl p-6 text-center">
                <svg class="icon-lg text-pink-400 mx-auto mb-3"><use href="#icon-gift"/></svg>
                <p class="text-3xl font-black text-pink-400" id="profileRedemptions">0</p>
                <p class="text-gray-500 text-sm">Redemptions</p>
            </div>
            <div class="stat-card glass-strong rounded-2xl p-6 text-center">
                <svg class="icon-lg text-blue-400 mx-auto mb-3"><use href="#icon-calendar"/></svg>
                <p class="text-3xl font-black text-blue-400" id="profileMemberSince">--</p>
                <p class="text-gray-500 text-sm">Member Since</p>
            </div>
        </div>

        <!-- Account Details -->
        <div class="glass-strong rounded-3xl p-8 mb-8">
            <h2 class="text-2xl font-black mb-6 flex items-center gap-3">
                <svg class="icon text-blue-400"><use href="#icon-user"/></svg>
                Account Details
            </h2>
            <div class="space-y-4">
                <div class="flex items-center justify-between p-4 glass rounded-xl">
                    <div class="flex items-center gap-3">
                        <svg class="icon text-gray-400"><use href="#icon-user"/></svg>
                        <span class="text-gray-400">User ID</span>
                    </div>
                    <span class="font-mono text-sm" id="profileUserId">---</span>
                </div>
                <div class="flex items-center justify-between p-4 glass rounded-xl">
                    <div class="flex items-center gap-3">
                        <svg class="icon text-gray-400"><use href="#icon-calendar"/></svg>
                        <span class="text-gray-400">Joined</span>
                    </div>
                    <span id="profileJoinDate">---</span>
                </div>
                <div class="flex items-center justify-between p-4 glass rounded-xl">
                    <div class="flex items-center gap-3">
                        <svg class="icon text-gray-400"><use href="#icon-clock"/></svg>
                        <span class="text-gray-400">Last Active</span>
                    </div>
                    <span id="profileLastActive">---</span>
                </div>
            </div>
        </div>

        <!-- Quick Actions -->
        <div class="glass-strong rounded-3xl p-8">
            <h2 class="text-2xl font-black mb-6 flex items-center gap-3">
                <svg class="icon text-green-400"><use href="#icon-settings"/></svg>
                Quick Actions
            </h2>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                <a href="index.html" class="p-4 glass rounded-xl hover:bg-white/10 transition-all flex item-center gap-4">
<svg class="icon text-purple-400"><use href="#icon-home"/></svg>
<div>
<p class="font-bold">Back to Home</p>
<p class="text-gray-500 text-sm">Visit main website</p>
</div>
</a>
<button id="changePasswordBtn" class="p-4 glass rounded-xl hover:bg-white/10 transition-all flex items-center gap-4 text-left w-full">
<svg class="icon text-blue-400"><use href="#icon-settings"/></svg>
<div>
<p class="font-bold">Change Password</p>
<p class="text-gray-500 text-sm">Update your password</p>
</div>
</button>
<button id="logoutBtnProfile" class="p-4 glass rounded-xl hover:bg-red-500/20 transition-all flex items-center gap-4 text-left w-full">
<svg class="icon text-red-400"><use href="#icon-logout"/></svg>
<div>
<p class="font-bold text-red-400">Logout</p>
<p class="text-gray-500 text-sm">Sign out of your account</p>
</div>
</button>
<a href="mailto:booklings.official@gmail.com" class="p-4 glass rounded-xl hover:bg-white/10 transition-all flex items-center gap-4">
<svg class="icon text-pink-400"><use href="#icon-message"/></svg>
<div>
<p class="font-bold">Contact Support</p>
<p class="text-gray-500 text-sm">Get help with your account</p>
</div>
</a>
</div>
</div>
</div>
</main>
</div>
<script>
    // ===== FIREBASE CONFIGURATION =====
    const firebaseConfig = {
        apiKey: "AIzaSyCgGeZDIvUVCjkzbDrd5BK9It6yhDielVY",
        authDomain: "booklings-csn.firebaseapp.com",
        projectId: "booklings-csn",
        storageBucket: "booklings-csn.firebasestorage.app",
        messagingSenderId: "857780343088",
        appId: "1:857780343088:web:36c271512cd0fb0a0d38f5"
    };

    // Initialize Firebase
    firebase.initializeApp(firebaseConfig);
    const auth = firebase.auth();
    const db = firebase.firestore();

    // ===== REWARDS DATA =====
    const REWARDS = [
        { id: 'bookmark', name: 'Custom Bookmark', description: 'Exclusive Booklings branded bookmark', cost: 100, icon: 'bookmark', gradient: 'from-purple-600 to-pink-600' },
        { id: 'ebook', name: 'Free E-Book', description: 'Choose any e-book from our library', cost: 250, icon: 'book', gradient: 'from-blue-600 to-cyan-600' },
        { id: 'merch', name: 'Booklings T-Shirt', description: 'Exclusive club merchandise', cost: 500, icon: 'shirt', gradient: 'from-green-600 to-teal-600' },
        { id: 'book', name: 'Physical Book', description: 'Free book from our reading list', cost: 750, icon: 'book', gradient: 'from-orange-600 to-red-600' },
        { id: 'vip', name: 'VIP Session Access', description: 'Exclusive author meet and greet', cost: 1000, icon: 'star', gradient: 'from-yellow-500 to-orange-500' },
        { id: 'gift-card', name: '500 Rupee Gift Card', description: 'Amazon/Flipkart gift voucher', cost: 2000, icon: 'card', gradient: 'from-pink-600 to-purple-600' }
    ];

    // ===== STATE FLAGS =====
    let isRedirecting = false;
    let authCheckComplete = false;
    let currentUser = null;
    let userData = null;
    let userCoins = 0;
    let selectedReward = null;

    // ===== DOM ELEMENTS =====
    const loadingOverlay = document.getElementById('loadingOverlay');
    const mainContent = document.getElementById('mainContent');

    // ===== REDIRECT TO LOGIN =====
    function redirectToLogin() {
        if (isRedirecting) return;
        isRedirecting = true;
        window.location.href = 'login.html';
    }

    // ===== SHOW DASHBOARD =====
    async function showDashboard(user) {
        if (authCheckComplete) return;
        authCheckComplete = true;
        
        currentUser = user;
        
        try {
            await loadUserData(user);
            await loadTransactions();
            await loadRedemptions();
            await loadLeaderboard();
            renderRewards();
            updateRedeemCards();
            
            // Show content with animation
            loadingOverlay.classList.add('fade-out');
            mainContent.classList.add('show');
            initAnimations();
            setupCursorHovers();
            setupEventListeners();
            
        } catch (error) {
            console.error('Error loading data:', error);
            loadingOverlay.classList.add('fade-out');
            mainContent.classList.add('show');
        }
    }

    // ===== AUTH STATE LISTENER =====
    auth.onAuthStateChanged((user) => {
        if (!user && !isRedirecting) {
            redirectToLogin();
        } else if (user && !authCheckComplete) {
            showDashboard(user);
        }
    });

    // Fallback timeout
    setTimeout(() => {
        if (!authCheckComplete && !isRedirecting) {
            redirectToLogin();
        }
    }, 5000);

    // ===== PREVENT BACK BUTTON ISSUES =====
    window.addEventListener('pageshow', (event) => {
        if (event.persisted) {
            window.location.reload();
        }
    });

    // ===== LOAD USER DATA =====
    async function loadUserData(user) {
        const displayName = user.displayName || 'Reader';

        try {
            const userDoc = await db.collection('users').doc(user.uid).get();
            
            if (userDoc.exists) {
                userData = userDoc.data();
                userCoins = userData.coins || 0;
            } else {
                userData = {
                    name: displayName,
                    email: user.email,
                    coins: 100,
                    totalEarned: 100,
                    totalSpent: 0,
                    streak: 0,
                    bio: '',
                    genre: '',
                    createdAt: firebase.firestore.FieldValue.serverTimestamp(),
                    lastActive: firebase.firestore.FieldValue.serverTimestamp()
                };
                
                await db.collection('users').doc(user.uid).set(userData);
                userCoins = 100;
                
                await db.collection('users').doc(user.uid).collection('transactions').add({
                    type: 'earned',
                    amount: 100,
                    reason: 'Welcome bonus',
                    timestamp: firebase.firestore.FieldValue.serverTimestamp()
                });
                
                showToast('Welcome bonus: +100 coins!', 'success');
            }

            await db.collection('users').doc(user.uid).update({
                lastActive: firebase.firestore.FieldValue.serverTimestamp()
            });

            updateAllDisplays();
            
        } catch (error) {
            console.error('Error loading user data:', error);
            userCoins = 0;
            updateAllDisplays();
        }
    }

    // ===== UPDATE ALL DISPLAYS =====
    function updateAllDisplays() {
        const displayName = userData?.name || currentUser?.displayName || 'Reader';
        const initials = getInitials(displayName);
        const email = currentUser?.email || '';
        
        ['coinBalance', 'sidebarCoins', 'mobileCoins', 'redeemBalance', 'yourCoins', 'profileCoins'].forEach(id => {
            const el = document.getElementById(id);
            if (el) el.textContent = userCoins.toLocaleString();
        });

        ['sidebarAvatar', 'yourRankAvatar', 'profileAvatar'].forEach(id => {
            const el = document.getElementById(id);
            if (el) el.textContent = initials;
        });

        const sidebarNameEl = document.getElementById('sidebarName');
        const profileNameEl = document.getElementById('profileName');
        const profileEmailEl = document.getElementById('profileEmail');
        
        if (sidebarNameEl) sidebarNameEl.textContent = displayName;
        if (profileNameEl) profileNameEl.textContent = displayName;
        if (profileEmailEl) profileEmailEl.textContent = email;
        
        document.getElementById('totalEarned').textContent = (userData?.totalEarned || 0).toLocaleString();
        document.getElementById('totalSpent').textContent = (userData?.totalSpent || 0).toLocaleString();
        document.getElementById('currentStreak').textContent = userData?.streak || 0;
        document.getElementById('profileBio').textContent = userData?.bio || 'No bio yet';
        document.getElementById('profileGenre').textContent = userData?.genre || 'No genre';
        
        const userIdEl = document.getElementById('profileUserId');
        if (userIdEl && currentUser?.uid) {
            userIdEl.textContent = currentUser.uid.slice(0, 12) + '...';
        }
        
        if (userData?.createdAt) {
            const joinDate = userData.createdAt.toDate ? userData.createdAt.toDate() : new Date(userData.createdAt);
            document.getElementById('profileJoinDate').textContent = formatDate(joinDate);
            document.getElementById('profileMemberSince').textContent = formatDateShort(joinDate);
        }
        
        if (userData?.lastActive) {
            const lastActive = userData.lastActive.toDate ? userData.lastActive.toDate() : new Date(userData.lastActive);
            document.getElementById('profileLastActive').textContent = formatRelativeTime(lastActive);
        }
    }

    // ===== LOAD TRANSACTIONS =====
    async function loadTransactions() {
        try {
            const snapshot = await db.collection('users').doc(currentUser.uid)
                .collection('transactions')
                .orderBy('timestamp', 'desc')
                .limit(10)
                .get();

            const container = document.getElementById('transactionsList');
            
            if (snapshot.empty) {
                container.innerHTML = `<div class="empty-state"><svg class="icon-xl text-gray-600 mx-auto mb-3"><use href="#icon-clock"/></svg><p>No transactions yet</p></div>`;
                return;
            }

            container.innerHTML = snapshot.docs.map(doc => {
                const data = doc.data();
                const isEarned = data.type === 'earned';
                const timestamp = data.timestamp?.toDate ? data.timestamp.toDate() : new Date();
                
                return `
                    <div class="transaction-item flex items-center gap-4 p-4 glass rounded-xl border-l-4 ${isEarned ? 'border-green-500' : 'border-red-500'}">
                        <div class="w-10 h-10 rounded-full ${isEarned ? 'bg-green-500/20' : 'bg-red-500/20'} flex items-center justify-center flex-shrink-0">
                            <svg class="icon-sm ${isEarned ? 'text-green-400' : 'text-red-400'}"><use href="#icon-arrow-${isEarned ? 'up' : 'down'}"/></svg>
                        </div>
                        <div class="flex-1 min-w-0">
                            <p class="font-bold truncate">${data.reason || 'Transaction'}</p>
                            <p class="text-gray-500 text-sm">${formatRelativeTime(timestamp)}</p>
                        </div>
                        <div class="font-black ${isEarned ? 'text-green-400' : 'text-red-400'} flex-shrink-0">${isEarned ? '+' : '-'}${data.amount}</div>
                    </div>
                `;
            }).join('');
        } catch (error) {
            console.error('Error loading transactions:', error);
        }
    }

    // ===== LOAD REDEMPTIONS =====
    async function loadRedemptions() {
        try {
            const snapshot = await db.collection('users').doc(currentUser.uid)
                .collection('redemptions')
                .orderBy('timestamp', 'desc')
                .limit(10)
                .get();

            const container = document.getElementById('redemptionHistory');
            document.getElementById('totalRedemptions').textContent = snapshot.size;
            document.getElementById('profileRedemptions').textContent = snapshot.size;
            
            if (snapshot.empty) {
                container.innerHTML = `<div class="empty-state"><svg class="icon-xl text-gray-600 mx-auto mb-3"><use href="#icon-gift"/></svg><p>No redemptions yet</p></div>`;
                return;
            }

            container.innerHTML = snapshot.docs.map(doc => {
                const data = doc.data();
                const timestamp = data.timestamp?.toDate ? data.timestamp.toDate() : new Date();
                const status = data.status || 'pending';
                const statusBadge = { 
                    'pending': '<span class="badge badge-pending">Pending</span>', 
                    'completed': '<span class="badge badge-success">Completed</span>', 
                    'failed': '<span class="badge badge-failed">Failed</span>' 
                };
                
                return `
                    <div class="transaction-item flex items-center gap-4 p-4 glass rounded-xl border-l-4 border-pink-500">
                        <div class="w-10 h-10 rounded-full bg-pink-500/20 flex items-center justify-center flex-shrink-0">
                            <svg class="icon-sm text-pink-400"><use href="#icon-gift"/></svg>
                        </div>
                        <div class="flex-1 min-w-0">
                            <p class="font-bold truncate">${data.name || 'Reward'}</p>
                            <p class="text-gray-500 text-sm">${formatRelativeTime(timestamp)}</p>
                        </div>
                        <div class="text-right flex-shrink-0">
                            <p class="font-black text-yellow-400">-${data.cost}</p>
                            ${statusBadge[status] || statusBadge['pending']}
                        </div>
                    </div>
                `;
            }).join('');
        } catch (error) {
            console.error('Error loading redemptions:', error);
        }
    }

    // ===== LOAD LEADERBOARD =====
    async function loadLeaderboard() {
        try {
            const snapshot = await db.collection('users')
                .orderBy('coins', 'desc')
                .limit(20)
                .get();

            const users = [];
            let userRank = null;

            snapshot.forEach((doc) => {
                const data = doc.data();
                users.push({
                    id: doc.id,
                    name: data.name || 'Anonymous',
                    coins: data.coins || 0
                });

                if (doc.id === currentUser.uid) {
                    userRank = users.length;
                }
            });

            // Update podium
            if (users[0]) {
                document.getElementById('rank1Name').textContent = users[0].name;
                document.getElementById('rank1Coins').textContent = users[0].coins.toLocaleString();
                document.getElementById('rank1Avatar').textContent = getInitials(users[0].name);
            }
            if (users[1]) {
                document.getElementById('rank2Name').textContent = users[1].name;
                document.getElementById('rank2Coins').textContent = users[1].coins.toLocaleString();
                document.getElementById('rank2Avatar').textContent = getInitials(users[1].name);
            }
            if (users[2]) {
                document.getElementById('rank3Name').textContent = users[2].name;
                document.getElementById('rank3Coins').textContent = users[2].coins.toLocaleString();
                document.getElementById('rank3Avatar').textContent = getInitials(users[2].name);
            }

            // Full leaderboard list
            const leaderboardContainer = document.getElementById('fullLeaderboard');
            
            if (users.length === 0) {
                leaderboardContainer.innerHTML = `
                    <div class="empty-state">
                        <svg class="icon-xl text-gray-600 mx-auto mb-3"><use href="#icon-trophy"/></svg>
                        <p>No users yet</p>
                    </div>
                `;
            } else {
                leaderboardContainer.innerHTML = users.map((user, index) => `
                    <div class="leaderboard-item flex items-center gap-4 p-4 rounded-xl border-l-4 ${index < 3 ? `rank-${index + 1}` : 'border-white/10'} ${user.id === currentUser.uid ? 'bg-purple-500/20' : ''}">
                        <div class="w-10 h-10 rounded-full bg-gradient-to-br from-purple-600 to-pink-600 flex items-center justify-center font-bold text-sm flex-shrink-0">
                            ${index + 1}
                        </div>
                        <div class="w-12 h-12 rounded-full bg-gradient-to-br from-gray-600 to-gray-800 flex items-center justify-center font-bold flex-shrink-0">
                            ${getInitials(user.name)}
                        </div>
                        <div class="flex-1 min-w-0">
                            <p class="font-bold truncate ${user.id === currentUser.uid ? 'text-purple-400' : ''}">
                                ${user.name} ${user.id === currentUser.uid ? '(You)' : ''}
                            </p>
                        </div>
                        <div class="text-yellow-400 font-bold flex items-center gap-1 flex-shrink-0">
                            <svg class="icon-sm"><use href="#icon-coin"/></svg>
                            ${user.coins.toLocaleString()}
                        </div>
                    </div>
                `).join('');
            }

            // Your rank display
            document.getElementById('yourRank').textContent = userRank || '--';
            document.getElementById('profileRank').textContent = userRank ? `#${userRank}` : '#--';

        } catch (error) {
            console.error('Error loading leaderboard:', error);
            document.getElementById('fullLeaderboard').innerHTML = `
                <div class="empty-state">
                    <svg class="icon-xl text-gray-600 mx-auto mb-3"><use href="#icon-x"/></svg>
                    <p>Failed to load leaderboard</p>
                </div>
            `;
        }
    }

    // ===== RENDER REWARDS =====
    function renderRewards() {
        const container = document.getElementById('rewardsGrid');
        container.innerHTML = REWARDS.map(reward => `
            <div class="redeem-card glass-strong rounded-3xl p-6 relative overflow-hidden"
                 data-cost="${reward.cost}"
                 data-reward="${reward.id}"
                 data-name="${reward.name}">
                <div class="absolute top-4 right-4 bg-yellow-500/20 text-yellow-400 px-3 py-1 rounded-full text-sm font-bold flex items-center gap-1">
                    <svg class="icon-sm"><use href="#icon-coin"/></svg>
                    ${reward.cost}
                </div>
                <div class="w-16 h-16 rounded-2xl bg-gradient-to-br ${reward.gradient} flex items-center justify-center mb-4">
                    <svg class="icon-lg text-white"><use href="#icon-${reward.icon}"/></svg>
                </div>
                <h3 class="text-xl font-black mb-2">${reward.name}</h3>
                <p class="text-gray-400 text-sm mb-4">${reward.description}</p>
                <button class="redeem-btn w-full py-3 rounded-xl bg-gradient-to-r from-purple-600 to-pink-600 font-bold hover:scale-105 transition-all flex items-center justify-center gap-2">
                    <svg class="icon-sm"><use href="#icon-gift"/></svg>
                    Redeem
                </button>
            </div>
        `).join('');

        // Attach click listeners
        document.querySelectorAll('.redeem-btn').forEach(btn => {
            btn.addEventListener('click', handleRedeemClick);
        });
    }

    // ===== UPDATE REDEEM CARDS =====
    function updateRedeemCards() {
        document.querySelectorAll('.redeem-card').forEach(card => {
            const cost = parseInt(card.dataset.cost, 10);
            const btn = card.querySelector('.redeem-btn');
            
            if (userCoins < cost) {
                card.classList.add('disabled');
                btn.innerHTML = `
                    <svg class="icon-sm"><use href="#icon-x"/></svg>
                    Not Enough Coins
                `;
            } else {
                card.classList.remove('disabled');
                btn.innerHTML = `
                    <svg class="icon-sm"><use href="#icon-gift"/></svg>
                    Redeem
                `;
            }
        });
    }

    // ===== HANDLE REDEEM CLICK =====
    function handleRedeemClick(e) {
        const card = e.target.closest('.redeem-card');
        if (!card || card.classList.contains('disabled')) return;

        selectedReward = {
            cost: parseInt(card.dataset.cost, 10),
            reward: card.dataset.reward,
            name: card.dataset.name
        };

        document.getElementById('modalTitle').textContent = `Redeem ${selectedReward.name}?`;
        document.getElementById('modalCost').textContent = `${selectedReward.cost} coins`;
        document.getElementById('redeemModal').classList.add('show');
    }

    // ===== EVENT LISTENERS =====
    function setupEventListeners() {
        // Redeem modal
        const redeemModal = document.getElementById('redeemModal');
        const confirmRedeemBtn = document.getElementById('confirmRedeem');
        const cancelRedeemBtn = document.getElementById('cancelRedeem');

        cancelRedeemBtn.addEventListener('click', () => {
            redeemModal.classList.remove('show');
            selectedReward = null;
        });

        redeemModal.addEventListener('click', (e) => {
            if (e.target === redeemModal) {
                redeemModal.classList.remove('show');
                selectedReward = null;
            }
        });

        confirmRedeemBtn.addEventListener('click', async () => {
            if (!selectedReward || !currentUser) return;

            confirmRedeemBtn.disabled = true;
            confirmRedeemBtn.innerHTML = `<div class="loader loader-sm"></div> Processing...`;

            try {
                const newCoins = userCoins - selectedReward.cost;
                const newTotalSpent = (userData?.totalSpent || 0) + selectedReward.cost;
                
                await db.collection('users').doc(currentUser.uid).update({
                    coins: newCoins,
                    totalSpent: newTotalSpent
                });

                await db.collection('users').doc(currentUser.uid).collection('redemptions').add({
                    reward: selectedReward.reward,
                    name: selectedReward.name,
                    cost: selectedReward.cost,
                    timestamp: firebase.firestore.FieldValue.serverTimestamp(),
                    status: 'pending'
                });

                await db.collection('users').doc(currentUser.uid).collection('transactions').add({
                    type: 'spent',
                    amount: selectedReward.cost,
                    reason: `Redeemed: ${selectedReward.name}`,
                    timestamp: firebase.firestore.FieldValue.serverTimestamp()
                });

                userCoins = newCoins;
                userData.coins = newCoins;
                userData.totalSpent = newTotalSpent;

                updateAllDisplays();
                updateRedeemCards();
                await loadTransactions();
                await loadRedemptions();
                
                redeemModal.classList.remove('show');
                showToast(`Successfully redeemed ${selectedReward.name}!`, 'success');
                selectedReward = null;

            } catch (error) {
                console.error('Redemption error:', error);
                showToast('Redemption failed. Please try again.', 'error');
            } finally {
                confirmRedeemBtn.disabled = false;
                confirmRedeemBtn.innerHTML = `
                    <svg class="icon-sm"><use href="#icon-check"/></svg>
                    Confirm
                `;
            }
        });

        // Edit profile
        const editProfileBtn = document.getElementById('editProfileBtn');
        const editProfileModal = document.getElementById('editProfileModal');
        const closeEditProfile = document.getElementById('closeEditProfile');
        const editProfileForm = document.getElementById('editProfileForm');

        editProfileBtn.addEventListener('click', () => {
            document.getElementById('editName').value = userData?.name || '';
            document.getElementById('editBio').value = userData?.bio || '';
            document.getElementById('editGenre').value = userData?.genre || '';
            editProfileModal.classList.add('show');
        });

        closeEditProfile.addEventListener('click', () => {
            editProfileModal.classList.remove('show');
        });

        editProfileModal.addEventListener('click', (e) => {
            if (e.target === editProfileModal) {
                editProfileModal.classList.remove('show');
            }
        });

        editProfileForm.addEventListener('submit', async (e) => {
            e.preventDefault();
            const newName = document.getElementById('editName').value.trim();
            const newBio = document.getElementById('editBio').value.trim();
            const newGenre = document.getElementById('editGenre').value;

            if (!newName) {
                showToast('Name cannot be empty', 'error');
                return;
            }

            try {
                await db.collection('users').doc(currentUser.uid).update({
                    name: newName,
                    bio: newBio,
                    genre: newGenre
                });

                await currentUser.updateProfile({ displayName: newName });

                userData.name = newName;
                userData.bio = newBio;
                userData.genre = newGenre;

                updateAllDisplays();
                editProfileModal.classList.remove('show');
                showToast('Profile updated successfully!', 'success');
            } catch (error) {
                console.error('Error updating profile:', error);
                showToast('Failed to update profile', 'error');
            }
        });

        // Change password
        const changePasswordBtn = document.getElementById('changePasswordBtn');
        changePasswordBtn.addEventListener('click', async () => {
            const email = currentUser?.email;
            if (!email) {
                showToast('No email found for this account', 'error');
                return;
            }
            try {
                await auth.sendPasswordResetEmail(email);
                showToast('Password reset email sent!', 'success');
            } catch (error) {
                console.error('Error sending reset email:', error);
                showToast('Failed to send reset email', 'error');
            }
        });

        // Logout buttons
        const logoutBtn = document.getElementById('logoutBtn');
        const mobileLogoutBtn = document.getElementById('mobileLogoutBtn');
        const logoutBtnProfile = document.getElementById('logoutBtnProfile');

        async function handleLogout() {
            if (isRedirecting) return;
            try {
                await auth.signOut();
                isRedirecting = true;
                window.location.href = 'login.html';
            } catch (error) {
                console.error('Logout error:', error);
                showToast('Logout failed. Please try again.', 'error');
            }
        }

        logoutBtn.addEventListener('click', handleLogout);
        mobileLogoutBtn.addEventListener('click', handleLogout);
        logoutBtnProfile.addEventListener('click', handleLogout);

        // Tabs (sidebar + mobile)
        document.querySelectorAll('[data-tab]').forEach(btn => {
            btn.addEventListener('click', () => {
                const tab = btn.dataset.tab;

                document.querySelectorAll('[data-tab]').forEach(b => {
                    b.classList.remove('active');
                    if (b.classList.contains('sidebar-link')) {
                        b.classList.add('text-gray-400');
                    }
                });

                document.querySelectorAll(`[data-tab="${tab}"]`).forEach(b => {
                    b.classList.add('active');
                    b.classList.remove('text-gray-400');
                });

                document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
                document.getElementById(`${tab}Section`).classList.add('active');
            });
        });

        // ESC closes modals
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape') {
                document.getElementById('redeemModal').classList.remove('show');
                document.getElementById('editProfileModal').classList.remove('show');
                selectedReward = null;
            }
        });
    }

    // ===== TOAST NOTIFICATION =====
    function showToast(message, type = 'success') {
        const toast = document.getElementById('toast');
        const toastMessage = document.getElementById('toastMessage');
        toastMessage.textContent = message;
        toast.className = `toast ${type} show`;

        const iconUse = toast.querySelector('svg use');
        iconUse.setAttribute('href', type === 'success' ? '#icon-check' : '#icon-x');

        setTimeout(() => {
            toast.classList.remove('show');
        }, 3000);
    }

    // ===== HELPERS =====
    function getInitials(name) {
        if (!name) return '--';
        return name.split(' ').map(n => n[0]).join('').toUpperCase().slice(0, 2);
    }

    function formatDate(date) {
        return date.toLocaleDateString('en-US', { year: 'numeric', month: 'long', day: 'numeric' });
    }

    function formatDateShort(date) {
        return date.toLocaleDateString('en-US', { year: 'numeric', month: 'short' });
    }

    function formatRelativeTime(date) {
        const now = new Date();
        const diff = now - date;
        const seconds = Math.floor(diff / 1000);
        const minutes = Math.floor(seconds / 60);
        const hours = Math.floor(minutes / 60);
        const days = Math.floor(hours / 24);
        if (seconds < 60) return 'Just now';
        if (minutes < 60) return `${minutes}m ago`;
if (hours < 24) return `${hours}h ago`;
if (days < 7) return `${days}d ago`;
return formatDate(date);
}
// ===== CUSTOM CURSOR =====
const cursorDot = document.getElementById('cursorDot');
const cursorCircle = document.getElementById('cursorCircle');
let mouseX = 0, mouseY = 0, circleX = 0, circleY = 0;

document.addEventListener('mousemove', (e) => {
    mouseX = e.clientX;
    mouseY = e.clientY;
    cursorDot.style.left = mouseX + 'px';
    cursorDot.style.top = mouseY + 'px';
});

function animateCursor() {
    circleX += (mouseX - circleX) * 0.15;
    circleY += (mouseY - circleY) * 0.15;
    cursorCircle.style.left = circleX + 'px';
    cursorCircle.style.top = circleY + 'px';
    requestAnimationFrame(animateCursor);
}
animateCursor();

function setupCursorHovers() {
    document.querySelectorAll('a, button, .redeem-card:not(.disabled), .sidebar-link, .leaderboard-item, input, textarea, select')
        .forEach(el => {
            el.addEventListener('mouseenter', () => {
                cursorDot.classList.add('hover');
                cursorCircle.classList.add('hover');
            });
            el.addEventListener('mouseleave', () => {
                cursorDot.classList.remove('hover');
                cursorCircle.classList.remove('hover');
            });
        });
}

// ===== GSAP ANIMATIONS =====
function initAnimations() {
    gsap.from('.glass-strong', {
        opacity: 0,
        y: 30,
        stagger: 0.1,
        duration: 0.8,
        ease: 'power3.out',
        delay: 0.2
    });

    gsap.from('.stat-card', {
        opacity: 0,
        scale: 0.9,
        stagger: 0.1,
        duration: 0.6,
        ease: 'back.out(1.7)',
        delay: 0.4
    });
}
</script>
</body>
</html>